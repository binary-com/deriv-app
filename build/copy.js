module.exports = function (grunt) {
    const common = [
        // Top level (dist)
        ...(global.is_release ? [] : [
            { expand: true, cwd: 'scripts', src: ['CNAME'], dest: 'dist' },
        ]),
        { expand: true, cwd: 'src/root_files/_common',  src: ['**'], dest: 'dist' },
        { expand: true, cwd: 'src/images/common/logos', src: ['**'], dest: `${global.dist}/images/common/logos/` },

        // This branch
        { expand: true, cwd: 'src/download/fonts', src: ['binary_symbols.woff'], dest: `${global.dist}/download/fonts/` },

        { expand: true, cwd: `src/images/favicons`, src: ['favicon.ico'], dest: global.dist },
        { expand: true, cwd: `src/images/favicons`, src: ['**'], dest: `${global.dist}/images/favicons/` },

        // Serve pushwoosh SDKs
        { expand: true, cwd: 'src/javascript/_common/lib/pushwooshSDK/', src: ['**'], dest: global.dist },
    ];

    const config = {
        app: {
            files: [
                ...common,
                { expand: true, cwd:  'src/root_files/app', src: ['sitemap*.xml'],      dest: 'dist' }, // top level
                { expand: true, cwd:  'src/root_files/app', src: ['index.html'],        dest: global.dist },

                // app
                { expand: true, cwd: 'src/images/app',                     src: ['**'],   dest: `${global.dist}/images/` },
                { expand: true, cwd: 'src/javascript/_autogenerated/app/', src: ['*.js'], dest: `${global.dist}/js/texts/` },

                // ChartIQ dependencies
                { expand: true, cwd: `${global.node_modules_paths.smartcharts}/dist/`, src: ['*.smartcharts.*'],  dest: `${global.dist}/js/smartcharts/` },
                { expand: true, cwd: `${global.node_modules_paths.smartcharts}/dist/`, src: ['smartcharts.css*'], dest: `${global.dist}/css/` },
            ],
        },
    };

    return { [global.section]: config[global.section] };
};
